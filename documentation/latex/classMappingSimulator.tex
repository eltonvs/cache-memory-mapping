\hypertarget{classMappingSimulator}{}\section{Referência à classe Mapping\+Simulator}
\label{classMappingSimulator}\index{Mapping\+Simulator@{Mapping\+Simulator}}


The Mapping Simulator Class.  




{\ttfamily \#include $<$mapping\+\_\+simulator.\+hpp$>$}

\subsection*{Membros públicos}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classMappingSimulator_a022509080806df80931c6de24775ca84}{Mapping\+Simulator} (unsigned \+\_\+cache\+\_\+sz, double \+\_\+max\+\_\+rate)
\begin{DoxyCompactList}\small\item\em The \hyperlink{classMappingSimulator}{Mapping\+Simulator} Constructor. \end{DoxyCompactList}\item 
\hyperlink{classMappingSimulator_a9bafb8500fde4efe045ce74510fe7a7f}{$\sim$\+Mapping\+Simulator} ()\hypertarget{classMappingSimulator_a9bafb8500fde4efe045ce74510fe7a7f}{}\label{classMappingSimulator_a9bafb8500fde4efe045ce74510fe7a7f}

\begin{DoxyCompactList}\small\item\em The \hyperlink{classMappingSimulator}{Mapping\+Simulator} Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classMappingSimulator_abe970a1be860a710964e25a193d737d9}{access} (std\+::string \+\_\+val)
\begin{DoxyCompactList}\small\item\em Function to access a value into the cache. \end{DoxyCompactList}\item 
void \hyperlink{classMappingSimulator_ad8c16e3840b4228aa36d5606e6d7abf0}{show} () const \hypertarget{classMappingSimulator_ad8c16e3840b4228aa36d5606e6d7abf0}{}\label{classMappingSimulator_ad8c16e3840b4228aa36d5606e6d7abf0}

\begin{DoxyCompactList}\small\item\em Shows the \hyperlink{classCache}{Cache} on console (using the default method) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Membros privados}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classMappingSimulator_a35470460ee0e521cd9c5aa827a764901}{search\+\_\+val} (unsigned \+\_\+m, std\+::string \+\_\+val, unsigned \&\+\_\+lpos) const 
\begin{DoxyCompactList}\small\item\em Function to search a value on \hyperlink{classCache}{Cache}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Atributos Privados}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classCache}{Cache} \hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\+\_\+cache}\hypertarget{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{}\label{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}

\begin{DoxyCompactList}\small\item\em The \hyperlink{classCache}{Cache} to be used. \end{DoxyCompactList}\item 
double \hyperlink{classMappingSimulator_a4636c2178965082cb9dbd78db7e98082}{m\+\_\+max\+\_\+miss\+\_\+rate}\hypertarget{classMappingSimulator_a4636c2178965082cb9dbd78db7e98082}{}\label{classMappingSimulator_a4636c2178965082cb9dbd78db7e98082}

\begin{DoxyCompactList}\small\item\em The maximum miss rate. \end{DoxyCompactList}\item 
unsigned \hyperlink{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{m\+\_\+miss\+\_\+cnt}\hypertarget{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{}\label{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}

\begin{DoxyCompactList}\small\item\em The miss counter. \end{DoxyCompactList}\item 
unsigned \hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\+\_\+access\+\_\+cnt}\hypertarget{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{}\label{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}

\begin{DoxyCompactList}\small\item\em The access counter. \end{DoxyCompactList}\item 
unsigned \hyperlink{classMappingSimulator_a77842beb2b039500a9d7459854fe4af1}{m\+\_\+current\+\_\+map}\hypertarget{classMappingSimulator_a77842beb2b039500a9d7459854fe4af1}{}\label{classMappingSimulator_a77842beb2b039500a9d7459854fe4af1}

\begin{DoxyCompactList}\small\item\em The current mapping function to be used. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Descrição detalhada}
The Mapping Simulator Class. 

\subsection{Documentação dos Construtores \& Destrutor}
\index{Mapping\+Simulator@{Mapping\+Simulator}!Mapping\+Simulator@{Mapping\+Simulator}}
\index{Mapping\+Simulator@{Mapping\+Simulator}!Mapping\+Simulator@{Mapping\+Simulator}}
\subsubsection[{\texorpdfstring{Mapping\+Simulator(unsigned \+\_\+cache\+\_\+sz, double \+\_\+max\+\_\+rate)}{MappingSimulator(unsigned _cache_sz, double _max_rate)}}]{\setlength{\rightskip}{0pt plus 5cm}Mapping\+Simulator\+::\+Mapping\+Simulator (
\begin{DoxyParamCaption}
\item[{unsigned}]{\+\_\+cache\+\_\+sz, }
\item[{double}]{\+\_\+max\+\_\+rate}
\end{DoxyParamCaption}
)}\hypertarget{classMappingSimulator_a022509080806df80931c6de24775ca84}{}\label{classMappingSimulator_a022509080806df80931c6de24775ca84}


The \hyperlink{classMappingSimulator}{Mapping\+Simulator} Constructor. 


\begin{DoxyParams}{Parâmetros}
{\em \+\_\+cache\+\_\+sz} & The \hyperlink{classCache}{Cache}\textquotesingle{}s size \\
\hline
{\em \+\_\+max\+\_\+rate} & The maximum miss rate \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
15     : \hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}(\_cache\_sz), \hyperlink{classMappingSimulator_a4636c2178965082cb9dbd78db7e98082}{m\_max\_miss\_rate}(\_max\_rate), 
      \hyperlink{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{m\_miss\_cnt}(0u),
16       \hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt}(0u), \hyperlink{classMappingSimulator_a77842beb2b039500a9d7459854fe4af1}{m\_current\_map}(0u) \{\}
\end{DoxyCode}


\subsection{Documentação dos métodos}
\index{Mapping\+Simulator@{Mapping\+Simulator}!access@{access}}
\index{access@{access}!Mapping\+Simulator@{Mapping\+Simulator}}
\subsubsection[{\texorpdfstring{access(std\+::string \+\_\+val)}{access(std::string _val)}}]{\setlength{\rightskip}{0pt plus 5cm}void Mapping\+Simulator\+::access (
\begin{DoxyParamCaption}
\item[{std\+::string}]{\+\_\+val}
\end{DoxyParamCaption}
)}\hypertarget{classMappingSimulator_abe970a1be860a710964e25a193d737d9}{}\label{classMappingSimulator_abe970a1be860a710964e25a193d737d9}


Function to access a value into the cache. 


\begin{DoxyParams}{Parâmetros}
{\em \+\_\+val} & The value to be accessed \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
22                                             \{
23     \hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt}++;
24     \textcolor{keywordtype}{unsigned} pos;
25     \textcolor{keywordtype}{double} miss\_rate = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\hyperlink{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{m\_miss\_cnt})/\hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt};
26 
27     \textcolor{keywordflow}{if} (\hyperlink{classMappingSimulator_a35470460ee0e521cd9c5aa827a764901}{search\_val}(\hyperlink{classMappingSimulator_a77842beb2b039500a9d7459854fe4af1}{m\_current\_map}, \_val, pos) == -1) \{
28         \hyperlink{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{m\_miss\_cnt}++;
29         miss\_rate = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(\hyperlink{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{m\_miss\_cnt})/\hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt};
30 
31         std::cout << \textcolor{stringliteral}{"[Miss] - Miss rate: "} << miss\_rate * 100 << \textcolor{charliteral}{'%'} << std::endl;
32 
33         \textcolor{comment}{// Add element to cache}
34         \hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_a02204c5cca523c17e51821f4a28f13cd}{setValue}(pos, \_val);
35 
36         \textcolor{comment}{// If the current miss rate pass the limit, switch the associativity}
37         \textcolor{keywordflow}{if} (miss\_rate > \hyperlink{classMappingSimulator_a4636c2178965082cb9dbd78db7e98082}{m\_max\_miss\_rate})
38             \hyperlink{classMappingSimulator_a77842beb2b039500a9d7459854fe4af1}{m\_current\_map}++, \hyperlink{classMappingSimulator_af2b6441ab194ede9936224c4797c66f0}{m\_miss\_cnt} = 0, \hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt} = 0;
39         \textcolor{keywordflow}{return};
40     \}
41 
42     std::cout << \textcolor{stringliteral}{"[Hit] - Miss rate: "} << miss\_rate * 100 << \textcolor{charliteral}{'%'} << std::endl;
43 \}
\end{DoxyCode}
\index{Mapping\+Simulator@{Mapping\+Simulator}!search\+\_\+val@{search\+\_\+val}}
\index{search\+\_\+val@{search\+\_\+val}!Mapping\+Simulator@{Mapping\+Simulator}}
\subsubsection[{\texorpdfstring{search\+\_\+val(unsigned \+\_\+m, std\+::string \+\_\+val, unsigned \&\+\_\+lpos) const }{search_val(unsigned _m, std::string _val, unsigned &_lpos) const }}]{\setlength{\rightskip}{0pt plus 5cm}int Mapping\+Simulator\+::search\+\_\+val (
\begin{DoxyParamCaption}
\item[{unsigned}]{\+\_\+m, }
\item[{std\+::string}]{\+\_\+val, }
\item[{unsigned \&}]{\+\_\+lpos}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classMappingSimulator_a35470460ee0e521cd9c5aa827a764901}{}\label{classMappingSimulator_a35470460ee0e521cd9c5aa827a764901}


Function to search a value on \hyperlink{classCache}{Cache}. 


\begin{DoxyParams}{Parâmetros}
{\em \+\_\+m} & The type of mapping to be used \\
\hline
{\em \+\_\+val} & To value to be searched \\
\hline
{\em \+\_\+lpos} & The last visited position (to insert the element on cache) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
The position where the value is located 
\end{DoxyReturn}

\begin{DoxyCode}
50                                                                                    \{
51     \textcolor{keywordtype}{bool} changed    = \textcolor{keyword}{false};
52     \textcolor{keywordtype}{int} dec\_val     = strtol(\_val.c\_str(), NULL, 16);
53     std::string aux = \textcolor{stringliteral}{"-"};
54     \textcolor{keywordtype}{unsigned} b\_val  = dec\_val % \hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}();
55     \textcolor{keywordtype}{unsigned} ini    = (dec\_val % 4) * (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}()/4);
56     \textcolor{keywordtype}{unsigned} end    = ini + (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}()/4);
57     \textcolor{keywordtype}{unsigned} i      = 0;
58 
59     \textcolor{keywordflow}{if} (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}() % 4 != 0)
60         end += (dec\_val % 4 == 3) ? (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}() % 4) : 0;
61 
62     \textcolor{keywordflow}{switch} (\_m % 3) \{
63         \textcolor{comment}{// Direct}
64         \textcolor{keywordflow}{case} 0:
65             std::cout << \textcolor{stringliteral}{"Direct Mapping "};
66             \textcolor{keywordflow}{if} (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_a6cae76d581d7c6c655652ed8c7a5afca}{getValue}(b\_val, aux) && aux == \_val)
67                 \textcolor{keywordflow}{return} b\_val;
68             \_lpos = b\_val, changed = \textcolor{keyword}{true};
69             \textcolor{keywordflow}{break};
70         \textcolor{comment}{// Partially Associative}
71         \textcolor{keywordflow}{case} 1:
72             std::cout << \textcolor{stringliteral}{"Partially Associative Mapping "};
73             i = \_lpos = ini;
74             \textcolor{keywordflow}{while} (i < end) \{
75                 \textcolor{keywordflow}{if} (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_a6cae76d581d7c6c655652ed8c7a5afca}{getValue}(i, aux) && aux == \_val)
76                     \textcolor{keywordflow}{return} b\_val;
77                 \textcolor{keywordflow}{if} (!changed && aux == \textcolor{stringliteral}{"-"})
78                     \_lpos = i, changed = \textcolor{keyword}{true};
79                 i++;
80             \}
81             \textcolor{keywordflow}{if} (!changed)
82                 \_lpos += (\hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt} % (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}()/4)), changed = \textcolor{keyword}{true};
83             \textcolor{keywordflow}{break};
84         \textcolor{comment}{// Totally Associative}
85         \textcolor{keywordflow}{case} 2:
86             std::cout << \textcolor{stringliteral}{"Totally Associative Mapping "};
87             \textcolor{keywordflow}{while} (i < \hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}()) \{
88                 \textcolor{keywordflow}{if} (\hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_a6cae76d581d7c6c655652ed8c7a5afca}{getValue}(i, aux) && aux == \_val)
89                     \textcolor{keywordflow}{return} i;
90                 \textcolor{keywordflow}{if} (!changed && aux == \textcolor{stringliteral}{"-"})
91                     \_lpos = i, changed = \textcolor{keyword}{true};
92                 i++;
93             \}
94             \textcolor{keywordflow}{if} (!changed)
95                 \_lpos = \hyperlink{classMappingSimulator_a8ab92a05774ab4a3ca35e2f299f58fc6}{m\_access\_cnt} % \hyperlink{classMappingSimulator_a5a8a438a167ea70c9aee70635d0ae06a}{m\_cache}.\hyperlink{classCache_aeba1d1861c728efecdf8774de51c77d0}{getSize}(), changed = \textcolor{keyword}{true};
96             \textcolor{keywordflow}{break};
97     \}
98 
99     \textcolor{keywordflow}{return} -1;
100 \}
\end{DoxyCode}


A documentação para esta classe foi gerada a partir dos seguintes ficheiros\+:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{mapping__simulator_8hpp}{mapping\+\_\+simulator.\+hpp}\item 
src/\hyperlink{mapping__simulator_8cpp}{mapping\+\_\+simulator.\+cpp}\end{DoxyCompactItemize}
